name: Dify Daily Report Timer

on:
  # 1. 定时触发：每天北京时间早上 8:30 运行 (UTC 00:30)
  schedule:
    - cron: '00 0 * * *'
  
  # 2. 手动触发：方便你随时点击测试，不用死等时间点
  workflow_dispatch:

jobs:
  trigger_dify:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        # 在这里定义你想查询的所有主题
        news_topic: ["科技动态", "时事热点", "金融财经"] 
    
    steps:
      - name: Trigger Dify for ${{ matrix.news_topic }}
        run: |
          curl -X POST 'https://api.dify.ai/v1/workflows/run' \
          --header 'Authorization: Bearer ${{ secrets.DIFY }}' \
          --header 'Content-Type: application/json' \
          --data-raw '{
            "inputs": {"topic": "${{ matrix.news_topic }}"},
            "user": "github-actions-bot"
          }'
